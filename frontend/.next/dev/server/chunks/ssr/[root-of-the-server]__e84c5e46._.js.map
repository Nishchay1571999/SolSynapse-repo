{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///home/basementfox/Desktop/projects/d-mssp/frontend/app/page.jsx"],"sourcesContent":["// pages/index.js\nimport { useEffect, useState, useRef } from \"react\";\n\nconst AGENTS = [\n  { id: \"agent-A\", label: \"Agent A (localhost:3001)\", url: \"http://localhost:3001\" },\n  { id: \"agent-B\", label: \"Agent B (localhost:3002)\", url: \"http://localhost:3002\" },\n];\n\nexport default function Home() {\n  const [fromAgent, setFromAgent] = useState(AGENTS[0].url);\n  const [toAgent, setToAgent] = useState(AGENTS[1].url);\n  const [payloadText, setPayloadText] = useState('{\"text\":\"Hello from UI\"}');\n  const [sending, setSending] = useState(false);\n  const [lastResponse, setLastResponse] = useState(null);\n  const [agentData, setAgentData] = useState({});\n  const intervalRef = useRef(null);\n\n  async function sendMessage() {\n    setSending(true);\n    setLastResponse(null);\n    try {\n      const r = await fetch(\"/api/proxy-send\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          fromAgentUrl: fromAgent,\n          receiverUrl: toAgent,\n          payload: tryParseJSON(payloadText),\n        }),\n      });\n      const json = await r.json();\n      setLastResponse(json);\n      // refresh agents data after send\n      await loadAgents();\n    } catch (e) {\n      setLastResponse({ error: e.message });\n    } finally {\n      setSending(false);\n    }\n  }\n\n  function tryParseJSON(s) {\n    try { return JSON.parse(s); } catch { return s; }\n  }\n\n  async function loadAgent(agentUrl) {\n    try {\n      const q = new URL(\"/api/proxy-fetch\", location.origin);\n      q.searchParams.set(\"agentUrl\", agentUrl);\n      const r = await fetch(q);\n      const json = await r.json();\n      return json;\n    } catch (e) {\n      return { error: e.message };\n    }\n  }\n\n  async function loadAgents() {\n    const d = {};\n    for (const a of AGENTS) {\n      d[a.id] = await loadAgent(a.url);\n    }\n    setAgentData(d);\n  }\n\n  useEffect(() => {\n    loadAgents();\n    intervalRef.current = setInterval(loadAgents, 3000);\n    return () => clearInterval(intervalRef.current);\n  }, []);\n\n  return (\n    <div style={{ padding: 24, fontFamily: \"system-ui, sans-serif\" }}>\n      <h1>Agent Demo UI</h1>\n\n      <div style={{ display: \"flex\", gap: 20 }}>\n        <div style={{ minWidth: 480, border: \"1px solid #ddd\", padding: 12, borderRadius: 6 }}>\n          <h3>Send Message (mimics curl)</h3>\n\n          <div style={{ marginBottom: 10 }}>\n            <label>From: </label>\n            <select value={fromAgent} onChange={(e) => setFromAgent(e.target.value)}>\n              {AGENTS.map(a => <option key={a.url} value={a.url}>{a.label}</option>)}\n            </select>\n            <label style={{ marginLeft: 12 }}>To: </label>\n            <select value={toAgent} onChange={(e) => setToAgent(e.target.value)}>\n              {AGENTS.map(a => <option key={a.url} value={a.url}>{a.label}</option>)}\n            </select>\n          </div>\n\n          <div style={{ marginBottom: 10 }}>\n            <label>Payload (JSON or string):</label>\n            <textarea\n              rows={5}\n              style={{ width: \"100%\", fontFamily: \"monospace\", marginTop: 6 }}\n              value={payloadText}\n              onChange={(e) => setPayloadText(e.target.value)}\n            />\n          </div>\n\n          <div style={{ display: \"flex\", gap: 8 }}>\n            <button onClick={sendMessage} disabled={sending} style={{ padding: \"8px 12px\" }}>\n              {sending ? \"Sendingâ€¦\" : \"Send (via agent /send-request)\"}\n            </button>\n            <button onClick={() => { setPayloadText('{\"text\":\"Hello from UI\"}'); }} style={{ padding: \"8px 12px\" }}>\n              Reset payload\n            </button>\n            <button onClick={() => { loadAgents(); }} style={{ padding: \"8px 12px\" }}>\n              Refresh agents\n            </button>\n          </div>\n\n          <div style={{ marginTop: 12 }}>\n            <h4>Last HTTP Response</h4>\n            <pre style={{ background: \"#f7f7f7\", padding: 8, borderRadius: 6, maxHeight: 220, overflow: \"auto\" }}>\n              {JSON.stringify(lastResponse, null, 2) || \"No response yet\"}\n            </pre>\n          </div>\n        </div>\n\n        <div style={{ flex: 1, display: \"flex\", flexDirection: \"column\", gap: 12 }}>\n          {AGENTS.map(a => (\n            <div key={a.id} style={{ border: \"1px solid #eee\", padding: 12, borderRadius: 6 }}>\n              <h3>{a.label}</h3>\n              <div style={{ display: \"flex\", gap: 8, marginBottom: 8 }}>\n                <strong>URL:</strong> <span>{a.url}</span>\n                <button onClick={() => navigator.clipboard?.writeText(a.url)} style={{ marginLeft: 8 }}>Copy</button>\n              </div>\n              <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 10 }}>\n                <div>\n                  <h4>Intents (latest)</h4>\n                  <pre style={{ maxHeight: 200, overflow: \"auto\", background: \"#fafafa\", padding: 8 }}>\n                    {JSON.stringify(agentData[a.id]?.intents?.slice?.(0, 8) || agentData[a.id]?.intents || \"loading\", null, 2)}\n                  </pre>\n                </div>\n                <div>\n                  <h4>Logs (latest)</h4>\n                  <pre style={{ maxHeight: 200, overflow: \"auto\", background: \"#fafafa\", padding: 8 }}>\n                    {JSON.stringify(agentData[a.id]?.logs?.slice?.(0, 20) || agentData[a.id]?.logs || \"loading\", null, 2)}\n                  </pre>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <footer style={{ marginTop: 18, color: \"#666\" }}>\n        Tip: If you get CORS errors calling agents directly from the browser, this UI's API proxy avoids them. Make sure both agents are running:\n        <ul>\n          <li>Agent A: <code>PORT=3001 AGENT_ID=agent-A node index.js</code></li>\n          <li>Agent B: <code>PORT=3002 AGENT_ID=agent-B node index.js</code></li>\n        </ul>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}